The below lines should be run on the Zynq SoC within the directory containing the image.ub file.

apt-get install u-boot-tools
apt-get install device-tree-compiler

dumpimage -T flat_dt -p 0 -o zImage image.fit
dumpimage -T flat_dt -p 6 -o system.dtb image.fit
dumpimage -T flat_dt -p 1 -0 ramdisk.cpio image.fit

dumpimage -l image.fit
use this information and a sample image.its file to create your custom image.its file
note that an image.its file for the Kria is included in this repository.

sudo dtc -I dtb -O dts -o system.dts system.dtb
modify device tree via the instructions below
sudo dtc -I dts -O dtb -o system.dtb system.dts

note: before doing this.. make sure to backup your image.fit as you might brick your SD card.

mkimage -f image.its image.fit

image.its is not supplied via image.fit originally.  It needs to be created by the user.  
https://www.gibbard.me/linux_fit_images/

    reserved-memory {
		#address-cells = <0x02>;
		#size-cells = <0x02>;
		ranges;

		reserved@20000000 {
			reg = <0x00 0x20000000 0x00 0x10000000>;
			no-map;
		};
	};
    
Note that this reserves memory location 0x20000000 throuhg 0x30000000.  You need to make sure that this does not interfere with any reserved memory 
that is reserved via the CMA boot args command.  You can check this after boot by the following command. dmesg | grep cma 

also the boot args must be updated to allow for UIO as shown below.

bootargs = "root=/dev/mmcblk0p2 rw earlyprintk rootfstype=ext4 rootwait devtmpfs.mount=1 uio_pdrv_genirq.of_id=\"generic-uio\" clk_ignore_unused";

A complete .dts file is also included in the repository for reference.
